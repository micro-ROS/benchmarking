#!/bin/sh

#replace the name of the library
# which 2nd parameter to this script

DEST=${1}
shift
LIBNAME=${1}
shift
SRCS=$@
AUTOFILES="README AUTHORS ChangeLog NEWS"

echo $LIBNAME $SRCS 
cp -v template_configure_ac $DEST/configure.ac
cp -v template_makefile_am $DEST/Makefile.am

sed -i -e  's/@@LIBNAME@@/'$LIBNAME'/g' $DEST/configure.ac
sed -i -e  's/@@LIBNAME@@/'$LIBNAME'/g' $DEST/Makefile.am

#replace the source file path
sed -i -e 's|@@LIBSOURCES@@|'"${SRCS}"'|g' $DEST/configure.ac
sed -i -e 's|@@LIBSOURCES@@|'"${SRCS}"'|g' $DEST/Makefile.am

#make autotool happy
for i in ${AUTOFILES};
do
	echo "Autogenerated $i" > ${DEST}/${i}
done
